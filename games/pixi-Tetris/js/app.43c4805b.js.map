{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/sites/pixi-Tetris/components/gameover.vue?d0e4","webpack:///./src/sites/pixi-Tetris/App.vue?4289","webpack:///./src/sites/pixi-Tetris/App.vue?7721","webpack:///./src/sites/pixi-Tetris/pixi-store.js","webpack:///./src/sites/pixi-Tetris/pixi-util.js","webpack:///./src/sites/pixi-Tetris/pixi.js","webpack:///./src/sites/pixi-Tetris/components/gameover.vue?2eb4","webpack:///src/sites/pixi-Tetris/components/gameover.vue","webpack:///./src/sites/pixi-Tetris/components/gameover.vue?bbd7","webpack:///./src/sites/pixi-Tetris/components/gameover.vue","webpack:///src/sites/pixi-Tetris/App.vue","webpack:///./src/sites/pixi-Tetris/App.vue?2b5d","webpack:///./src/sites/pixi-Tetris/App.vue","webpack:///./src/sites/pixi-Tetris/registerServiceWorker.js","webpack:///./src/sites/pixi-Tetris/main.js","webpack:///./src/sites/pixi-Tetris/assets/one.png","webpack:///./src/sites/pixi-Tetris/App.vue?18be"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","app","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_gameover_vue_vue_type_style_index_0_id_2fdcc750_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_gameover_vue_vue_type_style_index_0_id_2fdcc750_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_1_id_3f094efe_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_1_id_3f094efe_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","Appvue_type_template_id_3f094efe_scoped_true_render","_vm","this","_h","$createElement","_c","_self","attrs","id","staticClass","_v","on","click","restart","pause","guide","ref","_l","index","directives","rawName","expression","up","left","down","right","staticRenderFns","initStore","boxId","docId","delay","currentScore","highestScore","isGameOver","keyboard","keyCode","code","release","undefined","upHandler","event","preventDefault","addEventListener","randomInt","min","max","Math","floor","random","strip","num","precision","arguments","parseFloat","toPrecision","hitTestRectangle","r1","r2","direction","abs","y","height","x","width","tetris","game","getApp","isPause","delayId","dpr","devicePixelRatio","document","getElementById","store","clientWidth","spriteWidth","containerOffset","speed","movingContainer","PIXI","containerHandler","transparent","replaceWith","view","renderer","style","verticalAlign","transform","concat","transformOrigin","position","top","stage","addChild","loader","add","one","loadProgressHandler","load","createIdTexture","gameStart","ticker","play","resources","console","log","url","progress","makeTetris","eventHandler","setTimeout","hitStatus","updateTetris","vy","hit","checkHit","removeContainer","checkHasOneLine","children","filter","sprite","isSprite","texture","from","setupSprite","_ref","sprite2","aid","_","uniqueId","offsetX","offsetY","tetrisCoordinate","angle","map","v","vx","forEach","last","isDowning","idName","sprites","sortBy","child","reverse","sortByY","findIndex","sortSprites","ss","setInterval","alpha","clearInterval","removeChild","e","tint","xs","toConsumableArray","Set","movingSprites","allInX","some","hitSprites","movingSprite","first","compact","hitMovingBottom","hitWithBottom","checkHitRight","ys","allInY","find","hitMovingRight","checkHitLeft","hitMovingLeft","moving","hitSprite","contain","container","collision","getContainerHeight","topSpriteY","getSpritesInCoordinate","sort","a","b","leftSprites","getContainerWidth","clearTimeout","rotate","leftX","coo","original","origin","offsetIX","newTetris","correctCoordinate","removeChildren","cos","dirRight","dirLeft","dirY","conX","conY","co","gameovervue_type_template_id_2fdcc750_scoped_true_render","newGame","gameovervue_type_template_id_2fdcc750_scoped_true_staticRenderFns","gameovervue_type_script_lang_js_","props","methods","pixi","components_gameovervue_type_script_lang_js_","component","componentNormalizer","options","__file","gameover","Appvue_type_script_lang_js_","components","GameOver","pixi_store","mounted","pixi_Tetris_Appvue_type_script_lang_js_","App_component","App","register","process","ready","cached","updated","offline","error","Vue","config","productionTip","render","h","$mount","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_App_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"js/app.43c4805b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/games/pixi-Tetris/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"b92e\",\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gameover.vue?vue&type=style&index=0&id=2fdcc750&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gameover.vue?vue&type=style&index=0&id=2fdcc750&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=3f094efe&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=1&id=3f094efe&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"name\"},[_vm._v(\"pixi-Tetris\")]),_c('div',{staticClass:\"menu\"},[_c('div',{staticClass:\"btn\",on:{\"click\":_vm.restart}},[_vm._v(\"new game\")]),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.pause}},[_vm._v(\"pause\")]),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.guide}},[_vm._v(\"use guide\")])])]),_c('div',{ref:\"box\",staticClass:\"box\",attrs:{\"id\":\"box\"}},[_c('ul',{staticClass:\"tetris-bg\",attrs:{\"id\":\"tetris-bg\"}},_vm._l((200),function(t,index){return _c('li',{key:index})}),0),_c('div',{attrs:{\"id\":\"tetris\"}})]),_c('game-over',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.data.isGameOver),expression:\"data.isGameOver\"}]}),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"btn up\",on:{\"click\":_vm.up}},[_vm._v(\"↑\")])]),_c('div',{staticClass:\"control\"},[_c('div',{staticClass:\"btn left\",on:{\"click\":_vm.left}},[_vm._v(\"←\")]),_c('div',{staticClass:\"btn down\",on:{\"click\":_vm.down}},[_vm._v(\"↓\")]),_c('div',{staticClass:\"btn right\",on:{\"click\":_vm.right}},[_vm._v(\"→\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from 'lodash';\n\nlet data = {};\ninitStore();\n\nexport function initStore() {\n  data.boxId = 'tetris-bg';\n  data.docId = 'tetris';\n  data.delay = 1000;\n  data.currentScore = 0;\n  data.highestScore = 0;\n  data.isGameOver = false;\n  data.guide = true;\n}\n\nexport default data;\n","export function keyboard(keyCode) {\n  let key = {};\n  key.code = keyCode;\n  key.release = undefined;\n\n  key.upHandler = event => {\n    if (event.keyCode === key.code) {\n      if (key.release) key.release();\n    }\n    event.preventDefault();\n  };\n\n  window.addEventListener(\n    \"keyup\", key.upHandler.bind(key), false\n  );\n  return key;\n}\n\nexport function randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nexport function strip(num, precision = 12) {\n  return +parseFloat(num.toPrecision(precision));\n}\n\nexport function hitTestRectangle(r1, r2, direction) {\n  if (direction === 'down') {\n    return Math.abs(r2.y + r2.height - r1.y) <= 2;\n  }\n  if (direction === 'left') {\n    return Math.abs(r2.x - r2.width - r1.x) <= 2;\n  }\n  if (direction === 'right') {\n    return Math.abs(r2.x + r2.width - r1.x) <= 2;\n  }\n};\n","import * as PIXI from 'pixi.js'\nimport _ from 'lodash';\nimport one from './assets/one.png';\nimport store, {initStore} from './pixi-store';\nimport {keyboard, randomInt, strip, hitTestRectangle} from './pixi-util';\n\nconst tetris = [\n  [{x: 0, y: 0}, {x: 1, y: 0}, {x: 1, y: 1}, {x: 2, y: 1}, {x: 1, y: 1}],\n  [{x: 0, y: 1}, {x: 1, y: 1}, {x: 1, y: 0}, {x: 2, y: 0}, {x: 1, y: 1}],\n  [{x: 0, y: 1}, {x: 0, y: 0}, {x: 1, y: 1}, {x: 2, y: 1}, {x: 1, y: 1}],\n  [{x: 0, y: 1}, {x: 2, y: 0}, {x: 1, y: 1}, {x: 2, y: 1}, {x: 1, y: 1}],\n  [{x: 0, y: 1}, {x: 1, y: 0}, {x: 1, y: 1}, {x: 2, y: 1}, {x: 1, y: 1}],\n  [{x: 0, y: 0}, {x: 3, y: 0}, {x: 1, y: 0}, {x: 2, y: 0}, {x: 1, y: 0}],\n  [{x: 0, y: 0}, {x: 1, y: 0}, {x: 0, y: 1}, {x: 1, y: 1}, {x: 0, y: 0}]\n];\n\nlet app = null;\n\nconst game = {\n  app: getApp,\n  pause,\n  isPause: false,\n  delayId: null\n};\n\nfunction getApp () {\n  initStore();\n  game.dpr = window.devicePixelRatio;\n  game.width = document.getElementById(store.boxId).clientWidth * game.dpr;\n  game.spriteWidth = strip(game.width / 10);\n  game.containerOffset = 3;\n  game.speed = game.spriteWidth;\n  game.movingContainer = new PIXI.Container();\n  containerHandler();\n\n  app = new PIXI.Application({\n    width: this.width,\n    height: this.width * 2,\n    transparent: true\n  });\n  document.getElementById(store.docId).replaceWith(app.view);\n\n  app.renderer.view.id = store.docId;\n  app.renderer.view.style.verticalAlign = 'top';\n  app.renderer.view.style.transform = `scale(${1/game.dpr})`;\n  app.renderer.view.style.transformOrigin = `0 0`;\n  app.renderer.view.style.position = 'absolute';\n  app.renderer.view.style.top = '0'\n  app.renderer.view.style.left = '0'\n\n  app.stage.addChild(game.movingContainer);\n\n  app.loader\n    .add([one])\n    .on('progress', loadProgressHandler)\n    .load(() => {\n      createIdTexture();\n      gameStart();\n      let s = app.ticker.add(play);\n      // s.minFPS = 0.5;\n      // s.maxFPS = 0.5;\n    });\n}\n\nfunction loadProgressHandler (loader, resources) {\n  console.log(\"loading: \" + resources.url);\n  console.log(\"progress: \" + loader.progress + \"%\");\n}\n\nfunction gameStart () {\n  makeTetris(randomInt(0, tetris.length - 1));\n  eventHandler();\n}\n\nfunction play() {\n  if (game.delayId) return;\n  game.delayId = setTimeout(() => {\n    game.delayId = null;\n  }, store.delay);\n\n  if (game.isPause) return;\n\n  if (isGameOver()) {\n    store.isGameOver = true;\n    return;\n  }\n  let hitStatus = updateTetris();\n  if (!hitStatus) {\n    game.movingContainer.y += game.movingContainer.vy;\n  }\n}\n\nfunction updateTetris() {\n  let hit = checkHit();\n  if (hit) {\n    store.delay = 1000;\n    removeContainer();\n    checkHasOneLine();\n    makeTetris(randomInt(0, tetris.length - 1))\n  }\n  return hit;\n}\n\nfunction isGameOver() {\n  return !!app.stage.children.filter(sprite => sprite.isSprite)\n  .filter(sprite =>\n    sprite.x >= game.spriteWidth * game.containerOffset && sprite.x * game.spriteWidth * (game.containerOffset + 4) && sprite.y <= 2\n  ).length\n}\n\nfunction pause() {\n  game.isPause = !game.isPause;\n}\n\nfunction createIdTexture () {\n  game.texture = PIXI.Texture.from(one);\n}\n\nfunction setupSprite ({x, y}) {\n  let sprite2 = new PIXI.Sprite(game.texture);\n  sprite2.x = strip(x);\n  sprite2.y = strip(y);\n  sprite2.width = game.spriteWidth;\n  sprite2.height = game.spriteWidth;\n  sprite2.aid = _.uniqueId();\n  return sprite2;\n}\n\nfunction makeTetris (index, offsetX = 0, offsetY = 0) {\n  let tetrisCoordinate = typeof index === 'number' ? tetris[index] : game.movingContainer.tetris;\n  if (typeof index === 'number') {\n    game.movingContainer.angle = 0;\n  }\n  tetrisCoordinate.slice(0, 4).map(t => {\n    return setupSprite({\n      x: (t.x - offsetX) * game.spriteWidth,\n      y: (t.y - offsetY) * game.spriteWidth,\n      v: {\n        vx: 0,\n        vy: 0\n      }\n    })\n  }).forEach(sprite => {\n    game.movingContainer.addChild(sprite);\n  });\n  game.movingContainer.tetris = tetrisCoordinate;\n  game.movingContainer.vy = game.speed;\n  if (typeof index === 'number') {\n    game.movingContainer.x = strip(game.spriteWidth * game.containerOffset);\n    if (_.last(tetrisCoordinate).x === 1 && _.last(tetrisCoordinate).y === 1) {\n      game.movingContainer.y = -1 * game.spriteWidth;\n    } else {\n      game.movingContainer.y = -2 * game.spriteWidth;\n    }\n\n  }\n  game.isDowning = false;\n  game.movingContainer.idName = index;\n}\n\nfunction checkHasOneLine() {\n  let sprites = _.sortBy(app.stage.children.filter(child => child.isSprite), ['y']).reverse();\n  if (!sprites.length) return;\n  let sortByY = [[sprites[0]]];\n  sprites.slice(1).forEach(sprite => {\n    let index = sortByY.findIndex(sprites =>{\n      return Math.abs(sprites[0].y - sprite.y) < 2\n    })\n    if (index === -1) {\n      let l = [sprite];\n      sortByY.push(l);\n      return;\n    };\n    sortByY[index].push(sprite);\n  });\n  sortByY.forEach((sortSprites, i) => {\n    if (sortSprites.length === 10) {\n      let i = 0;\n      game.isPause = true;\n      let ss = setInterval(() => {\n        sortSprites.forEach(sprite => {\n          if (i % 2) {\n            sprite.alpha = 0.5\n            return\n          }\n            sprite.alpha = 1\n        });\n        if (i > 3) {\n          clearInterval(ss)\n          sortSprites.forEach(sprite => {\n            app.stage.removeChild(sprite);\n          });\n          sprites.filter(sprite => sprite.y < sortSprites[0].y).forEach(s => {\n            s.y += game.spriteWidth;\n          })\n          // sortByY.slice(i).forEach(s => {\n          //   s.forEach(sprite => {\n          //     sprite.y += game.spriteWidth;\n          //   })\n          // })\n          game.isPause = false;\n        }\n        ++i\n      }, 300);\n    }\n  })\n}\n\nfunction checkHit () {\n  game.movingContainer.children.forEach(e => e.tint = 0xFFFFFF);\n  let sprites = app.stage.children.filter(e => e.isSprite);\n  if (sprites.length) {\n    let xs = [...new Set(game.movingContainer.children.map(t => t.x + game.movingContainer.x))];\n    let movingSprites = xs.map(x =>\n      _.last(_.sortBy(game.movingContainer.children.filter(sprite => sprite.x + game.movingContainer.x === x), ['y']))\n    );\n    let allInX = sprites.filter(t =>\n      xs.some(x => Math.abs(x - t.x) < 2)\n    );\n\n    if (allInX.length) {\n      let hitSprites = movingSprites.map(movingSprite =>\n         _.first(_.sortBy(allInX.filter(sprite =>\n           Math.abs(sprite.x - movingSprite.x - game.movingContainer.x) < 2 &&\n           sprite.y - movingSprite.y - game.movingContainer.y >= -1), ['y']))\n      );\n      if (_.compact(hitSprites).length) {\n        return hitMovingBottom(hitSprites, movingSprites);\n      }\n      return hitWithBottom();\n    }\n\n    app.stage.children.filter(sprite => sprite.isSprite).forEach(sprite => sprite.tint = 0xFFFFFF);\n\n    return hitWithBottom();\n  }\n  return hitWithBottom();\n}\n\nfunction checkHitRight () {\n  game.movingContainer.children.forEach(e => e.tint = 0xFFFFFF);\n\n  let sprites = app.stage.children.filter(e => e.isSprite);\n  if (sprites.length) {\n    let ys = [...new Set(game.movingContainer.children.map(t => t.y + game.movingContainer.y))];\n    let movingSprites = ys.map(y =>\n      _.last(_.sortBy(game.movingContainer.children.filter(sprite => sprite.y + game.movingContainer.y === y), ['x']))\n      );\n    let allInY = sprites.filter(t => ys.find(y => Math.abs(y - t.y) < 2))\n\n    if (allInY.length) {\n      let hitSprites = movingSprites.map(movingSprite =>\n        _.first(_.sortBy(allInY.filter(sprite =>\n          Math.abs(sprite.y - movingSprite.y - game.movingContainer.y) < 2), ['x']))\n        );\n        return hitMovingRight(hitSprites, movingSprites);\n    }\n    return null;\n  }\n  return null;\n}\n\nfunction checkHitLeft () {\n  game.movingContainer.children.forEach(e => e.tint = 0xFFFFFF);\n\n  let sprites = app.stage.children.filter(e => e.isSprite);\n  if (sprites.length) {\n    let ys = [...new Set(game.movingContainer.children.map(t => t.y + game.movingContainer.y))];\n    let movingSprites = ys.map(y =>\n      _.first(_.sortBy(game.movingContainer.children.filter(sprite => sprite.y + game.movingContainer.y === y), ['x']))\n      );\n    let allInY = sprites.filter(t => ys.find(y => Math.abs(y - t.y) < 2))\n\n    if (allInY.length) {\n      let hitSprites = movingSprites.map(movingSprite =>\n        _.last(_.sortBy(allInY.filter(sprite =>\n          Math.abs(sprite.y - movingSprite.y - game.movingContainer.y) < 2), ['x']))\n        );\n        return hitMovingLeft(hitSprites, movingSprites);\n    }\n    return null;\n  }\n  return null;\n}\n\nfunction hitMovingBottom (hit, moving) {\n  app.stage.children.filter(sprite => sprite.isSprite).forEach(sprite => sprite.tint = 0xFFFFFF);\n  if (game.movingContainer) {\n    game.movingContainer.children.forEach(sprite => sprite.tint = 0xFFFFFF);\n  }\n  return moving.some(movingSprite => {\n    if (!movingSprite) return false;\n    let hitSprite = hit.find(sprite => sprite && Math.abs(movingSprite.x + game.movingContainer.x - sprite.x) < 2);\n    if (!hitSprite) return false;\n    store.guide && (hitSprite.tint = 0xFF0000);\n    store.guide && (movingSprite.tint = 0x01FF00);\n    return hitTestRectangle(hitSprite, {\n      x: movingSprite.x + game.movingContainer.x,\n      y: movingSprite.y + game.movingContainer.y,\n      width: movingSprite.width,\n      height: movingSprite.height\n    }, 'down')\n  }) ? 'hit' : null;\n}\n\nfunction hitMovingRight (hit, moving) {\n  app.stage.children.filter(sprite => sprite.isSprite).forEach(sprite => sprite.tint = 0xFFFFFF);\n  if (game.movingContainer) {\n    game.movingContainer.children.forEach(sprite => sprite.tint = 0xFFFFFF);\n  }\n  return moving.some(movingSprite => {\n    if (!movingSprite) return false;\n    let hitSprite = hit.find(sprite => sprite && Math.abs(movingSprite.y + game.movingContainer.y - sprite.y) < 2);\n    if (!hitSprite) return false;\n    store.guide && (hitSprite.tint = 0x9000A8);\n    store.guide && (movingSprite.tint = 0x01FF00);\n    return hitTestRectangle(hitSprite, {\n      x: movingSprite.x + game.movingContainer.x,\n      y: movingSprite.y + game.movingContainer.y,\n      width: movingSprite.width,\n      height: movingSprite.height\n    }, 'right')\n  }) ? 'hit-right' : null;\n}\n\nfunction hitMovingLeft (hit, moving) {\n  app.stage.children.filter(sprite => sprite.isSprite).forEach(sprite => sprite.tint = 0xFFFFFF);\n  if (game.movingContainer) {\n    game.movingContainer.children.forEach(sprite => sprite.tint = 0xFFFFFF);\n  }\n  return moving.some(movingSprite => {\n    if (!movingSprite) return false;\n    let hitSprite = hit.find(sprite => sprite && Math.abs(movingSprite.y + game.movingContainer.y - sprite.y) < 2);\n    if (!hitSprite) return false;\n    store.guide && (hitSprite.tint = 0x003D82);\n    store.guide && (movingSprite.tint = 0x01FF00);\n    return hitTestRectangle(hitSprite, {\n      x: movingSprite.x + game.movingContainer.x,\n      y: movingSprite.y + game.movingContainer.y,\n      width: movingSprite.width,\n      height: movingSprite.height\n    }, 'left')\n  }) ? 'hit-left' : null;\n}\n\nfunction hitWithBottom () {\n  return contain(game.movingContainer, {\n    height: app.renderer.height\n  });\n}\nfunction contain(sprite, container) {\n  let collision = null;\n  const height = getContainerHeight();\n  const topSpriteY = getSpritesInCoordinate('y').sort((a, b) => {\n    if (a - b < 0) return -1;\n    return 1;\n  })[0];\n  if (strip(game.movingContainer.y + topSpriteY + height) >= strip(container.height)) {\n    sprite.vy = 0;\n    collision = \"bottom\";\n  }\n\n  return collision;\n}\n\nfunction removeContainer () {\n  while(game.movingContainer.children[0]) {\n    let sprite = game.movingContainer.children[0];\n    sprite.y += game.movingContainer.y;\n    sprite.x += game.movingContainer.x;\n    sprite.tint = 0xFFFFFF;\n    app.stage.addChild(sprite);\n  }\n}\n\nfunction eventHandler() {\n  keyboard(37).release = game.movingContainer.left;\n  keyboard(38).release = game.movingContainer.up;\n  keyboard(39).release = game.movingContainer.right;\n  keyboard(40).release = game.movingContainer.down;\n  keyboard(32).release = pause;\n}\n\nfunction containerHandler() {\n  game.movingContainer.left = function () {\n    if (game.isDowning || game.isPause) return;\n    if (game.movingContainer.x + leftSprites()[0].x - game.spriteWidth < -1) return;\n    game.isPause = true;\n    if (checkHitLeft()) {\n      game.isPause = false;\n      return;\n    }\n    game.movingContainer.x = strip(game.movingContainer.x - game.spriteWidth);\n    game.isPause = false;\n    updateTetris();\n  }\n  game.movingContainer.right = function () {\n    if (game.isDowning || game.isPause) return;\n    if (game.movingContainer.x + leftSprites()[0].x + getContainerWidth() > game.width - 1) return;\n    game.isPause = true;\n    if (checkHitRight()) {\n      game.isPause = false;\n      return;\n    }\n\n    game.movingContainer.x += game.spriteWidth;\n    game.isPause = false;\n    updateTetris();\n  }\n  game.movingContainer.down = function() {\n    if (game.isDowning || game.isPause) return;\n    game.isDowning = true;\n    store.delay = 10;\n    clearTimeout(game.delayId);\n    game.delayId = null;\n    updateTetris();\n  }\n  game.movingContainer.up = function() {\n    if (game.isDowning) return;\n    rotate(game.movingContainer.idName);\n  }\n}\n\nfunction getContainerWidth() {\n  return getSpritesInCoordinate('x').length * game.spriteWidth;\n}\nfunction getContainerHeight() {\n  return getSpritesInCoordinate('y').length * game.spriteWidth;\n}\nfunction leftSprites() {\n  const leftX = _.sortBy(getSpritesInCoordinate('x'))[0];\n  return _.sortBy(game.movingContainer.children, ['x']).filter(sprite => sprite.x === leftX);\n}\nfunction getSpritesInCoordinate(coo) {\n  return [...new Set(game.movingContainer.children.map(sprite => sprite[coo]))]\n}\n\nfunction rotate() {\n  // check can be rotate\n  // ...\n  let {tetris} = game.movingContainer;\n  const original = tetris.slice(0, 4);\n  const origin = tetris[4];\n  let offsetIX = 0;\n  if (origin.x === 0 && origin.y === 0) return;\n  if (origin.x === 1 && origin.y === 0) {\n    offsetIX = 1;\n  }\n  const newTetris = original.map(o => {\n    return {\n      x: origin.x + origin.y - o.y + offsetIX,\n      y: o.x + origin.y - origin.x\n    };\n  });\n  correctCoordinate(newTetris);\n  newTetris.push(origin);\n  game.movingContainer.tetris = newTetris;\n  game.movingContainer.removeChildren();\n  makeTetris('rotate');\n}\n\nfunction correctCoordinate(cos) {\n  // 1 for overflow x, 0 for overflow bottom\n  let dirRight = 0;\n  let dirLeft = 0;\n  let dirY = 0;\n  const conX = game.movingContainer.x;\n  const conY = game.movingContainer.y;\n  cos.forEach(co => {\n    let left = co.x * game.spriteWidth + conX;\n    if ( left < 0 ) {\n      dirLeft = 1;\n    }\n    if (strip(left + game.spriteWidth) > app.renderer.width) {\n      dirRight = 1;\n    }\n    if (strip(co.y * game.spriteWidth + conY + game.spriteWidth) > app.renderer.height) {\n      dirY = 1;\n    }\n  });\n  console.log(`${dirLeft}, ${dirRight}, ${dirY}`)\n  if (!dirLeft && !dirRight && !dirY) return;\n  if (dirLeft) {\n    game.movingContainer.x -= _.first(_.sortBy(cos, ['x'])).x * game.spriteWidth + conX;\n  }\n  if (dirRight) {\n    game.movingContainer.x -= _.last(_.sortBy(cos, ['x'])).x * game.spriteWidth + game.spriteWidth + conX - app.renderer.width;\n  }\n  if(dirY) {\n    game.movingContainer.y -= _.last(_.sortBy(cos, ['y'])).y * game.spriteWidth + game.spriteWidth + conY - app.renderer.height\n  }\n}\n\nexport default game;\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"game-over\"},[_c('div',{staticClass:\"text\"},[_vm._v(\"game over!\")]),_c('div',{staticClass:\"btn\",on:{\"click\":_vm.newGame}},[_vm._v(\"new game\")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"game-over\">\n    <div class=\"text\">game over!</div>\n    <div class=\"btn\" @click=\"newGame\">new game</div>\n  </div>\n</template>\n\n<script>\nimport pixi from '../pixi';\nimport data from '../pixi-store';\n\nexport default {\n  name: 'GameOver',\n  props: {\n  },\n  methods: {\n    newGame() {\n      pixi.app();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import '~@/assets/style/util.scss';\n.game-over {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background-color: rgba($color: #a5a4a7, $alpha: 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  font-size: px2rem(30);\n\n  .text , .btn{\n    padding: px2rem(20);\n    border-radius: px2rem(10);\n  }\n  .text {\n    background-color: azure;\n  }\n  .btn {\n    margin-top: px2rem(20);\n    background-color: #999;\n  }\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gameover.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./gameover.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./gameover.vue?vue&type=template&id=2fdcc750&scoped=true&\"\nimport script from \"./gameover.vue?vue&type=script&lang=js&\"\nexport * from \"./gameover.vue?vue&type=script&lang=js&\"\nimport style0 from \"./gameover.vue?vue&type=style&index=0&id=2fdcc750&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2fdcc750\",\n  null\n  \n)\n\ncomponent.options.__file = \"gameover.vue\"\nexport default component.exports","<template>\n  <div id=\"app\">\n    <div class=\"content\">\n      <div class=\"name\">pixi-Tetris</div>\n      <div class=\"menu\">\n        <div class=\"btn\" @click=\"restart\">new game</div>\n        <div class=\"btn\" @click=\"pause\">pause</div>\n        <div class=\"btn\" @click=\"guide\">use guide</div>\n      </div>\n    </div>\n    <div id=\"box\" class=\"box\" ref=\"box\">\n      <ul id=\"tetris-bg\" class=\"tetris-bg\">\n        <li v-for=\"(t, index) in 200\" :key=\"index\"></li>\n      </ul>\n      <div id=\"tetris\"></div>\n    </div>\n    <game-over v-show=\"data.isGameOver\"></game-over>\n\n    <div class=\"control\">\n      <div class=\"btn up\" @click=\"up\">↑</div>\n    </div>\n\n    <div class=\"control\">\n      <div class=\"btn left\" @click=\"left\">←</div>\n      <div class=\"btn down\" @click=\"down\">↓</div>\n      <div class=\"btn right\" @click=\"right\">→</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport pixi from './pixi';\nimport data from './pixi-store';\nimport GameOver from './components/gameover.vue';\n\nexport default {\n  name: 'Games-Tetris',\n  components: {GameOver},\n  data() {\n    return {\n      data,\n      pixi\n    }\n  },\n  mounted() {\n    pixi.app();\n  },\n  methods: {\n    restart() {\n      pixi.app();\n    },\n    pause() {\n      pixi.pause();\n    },\n    guide() {\n      this.data.guide = !this.data.guide;\n    },\n    up() {\n      pixi.movingContainer.up();\n    },\n    left() {\n      pixi.movingContainer.left();\n    },\n    right() {\n      pixi.movingContainer.right();\n    },\n    down() {\n      pixi.movingContainer.down();\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\">\n@import '~@/assets/style/base.scss';\n</style>\n\n<style lang=\"scss\" scoped>\n@import '~@/assets/style/util.scss';\n#app {\n    margin-left: auto;\n    margin-right: auto;\n  .content {\n    width: 90%;\n    margin-left: auto;\n    margin-right: auto;\n    display: flex;\n    justify-content: space-between;\n    .name {\n      color: #776e65;\n      font-weight: 900;\n    }\n    .menu {\n      .dimension {\n        width: px2rem(160);\n        font-size: px2rem(30);\n        background-color: #bbada0;\n        padding: px2rem(12);\n        outline: none;\n        border: none;\n      }\n      .btn {\n        font-size: px2rem(30);\n        background-color: #413e35;\n        display: inline-block;\n        color: #fff;\n        margin-left: 30px;\n        border-radius: 5px;\n        padding: px2rem(10);\n      }\n    }\n  }\n  .tetris-bg {\n    background-color: #a0ac86;\n    width: px2rem(500);\n    height: px2rem(1000);\n    display: flex;\n    flex-wrap: wrap;\n    li {\n      background-image: url(./assets/one.png);\n      background-size: contain;\n      background-repeat: no-repeat;\n      opacity: 0.3;\n      width: px2rem(50);\n      height: px2rem(50);\n      flex-shrink: 0;\n    }\n  }\n  .box {\n    width: 90%;\n    margin: px2rem(50) auto;\n    border-radius: px2rem(40);\n    text-align: center;\n    position: relative;\n    #tetris {\n      position: absolute;\n      top: 0;\n      left: 0;\n    }\n  }\n    .control {\n      text-align: right;\n      .btn {\n        padding: px2rem(30);\n        margin-left: px2rem(20);\n        display: inline-block;\n        color: #fff;\n        background-color: #413e35;\n        }\n    }\n$moboleWidth: px2rem(640);\n$pcMiddleWidth: px2rem(640);\n$pcBigWidth: px2rem(350);\n\n  @media screen and (min-width:640px){\n    .content{\n      width: $pcMiddleWidth;\n      .name {\n        font-size: px2rem(50);\n      }\n    }\n    .box {\n      width: $pcMiddleWidth;\n    }\n  }\n  @media screen and (min-width:1024px){\n    .content{\n      width: $pcBigWidth;\n      .name {\n        font-size: px2rem(50);\n      }\n      .menu {\n        .dimension {\n          width: px2rem(70);\n          line-height: 1;\n          font-size: px2rem(16);\n        }\n        .btn {\n          font-size: px2rem(16);\n          padding: px2rem(10);\n        }\n      }\n    }\n    .box {\n      width: $pcBigWidth;\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=3f094efe&scoped=true&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\nimport style1 from \"./App.vue?vue&type=style&index=1&id=3f094efe&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3f094efe\",\n  null\n  \n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","/* eslint-disable no-console */\n\nimport { register } from \"register-service-worker\";\n\nif (process.env.NODE_ENV === \"production\") {\n  register(`${process.env.BASE_URL}service-worker.js`, {\n    ready() {\n      console.log(\n        \"App is being served from cache by a service worker.\\n\" +\n          \"For more details, visit https://goo.gl/AFskqB\"\n      );\n    },\n    cached() {\n      console.log(\"Content has been cached for offline use.\");\n    },\n    updated() {\n      console.log(\"New content is available; please refresh.\");\n    },\n    offline() {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    },\n    error(error) {\n      console.error(\"Error during service worker registration:\", error);\n    }\n  });\n}\n","import 'amfe-flexible';\nimport Vue from 'vue';\nimport App from './App.vue';\nimport './registerServiceWorker';\n\nVue.config.productionTip = false;\n\nnew Vue({\n  render: h => h(App)\n}).$mount('#app');\n","module.exports = __webpack_public_path__ + \"img/one.7e78d10c.png\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}